<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Talk to Sophie | Cold Lava</title>
  <style>
    body {
      margin: 0;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      background: linear-gradient(to bottom, #00c7d2 0%, #0a0908 80%);
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding-top: 40px;
    }

    .logo {
      width: 160px;
      margin-bottom: 20px;
    }

    .sophie-image {
      width: 220px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(20, 184, 166, 0.4);
      margin-bottom: 20px;
    }

    .text {
      font-size: 1.2rem;
      text-align: center;
      max-width: 600px;
      margin-bottom: 20px;
    }

    vapi-widget.voice-center {
      display: block;
      margin: 20px auto;
    }
  </style>
</head>
<body>

  <img src="https://cdn.shopify.com/s/files/1/0951/6141/8067/files/LAVA_1.png?v=1753207208" alt="Cold Lava Logo" class="logo" />

  <img src="https://cdn.shopify.com/s/files/1/0951/6141/8067/files/f63e1b45-8157-4920-ab3f-2833797fb6b9.png?v=1753867612" alt="Sophie" class="sophie-image" />

  <div class="text">
<strong>Detail Dynamics Webchat Demo</strong>.
  </div>

<!-- COPY THIS ENTIRE BLOCK FOR EMBEDDING -->
<div id="vapi-chat-widget-container">
  <style>
    /* Vapi Chat Widget - Mobile Responsive Styles */
    #vapi-chat-widget-container {
      position: relative;
      z-index: 999999;
    }

    /* Desktop default styles */
    #vapi-chat-widget-container vapi-widget {
      position: fixed !important;
      bottom: 20px !important;
      right: 20px !important;
      z-index: 999999 !important;
    }

    /* Tablet styles */
    @media screen and (max-width: 1024px) and (min-width: 769px) {
      #vapi-chat-widget-container vapi-widget {
        bottom: 15px !important;
        right: 15px !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(chat-container) {
        max-height: 65vh !important;
        width: 380px !important;
        max-width: calc(100vw - 30px) !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(messages-container) {
        max-height: calc(65vh - 140px) !important;
        overflow-y: auto !important;
      }
    }

    /* Mobile landscape styles */
    @media screen and (max-width: 768px) and (orientation: landscape) {
      #vapi-chat-widget-container vapi-widget {
        bottom: 10px !important;
        right: 10px !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(chat-container) {
        max-height: 50vh !important;
        width: 400px !important;
        max-width: calc(100vw - 20px) !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(messages-container) {
        max-height: calc(50vh - 140px) !important;
        overflow-y: auto !important;
      }
    }

    /* Mobile portrait styles */
    @media screen and (max-width: 768px) and (orientation: portrait) {
      #vapi-chat-widget-container vapi-widget {
        bottom: 10px !important;
        right: 10px !important;
        left: 10px !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(chat-container) {
        max-height: 70vh !important;
        width: calc(100vw - 20px) !important;
        max-width: 100% !important;
        margin: 0 auto !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(messages-container) {
        max-height: calc(70vh - 140px) !important;
        overflow-y: auto !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(trigger-button) {
        width: 56px !important;
        height: 56px !important;
        border-radius: 50% !important;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
      }
    }

    /* Small mobile devices */
    @media screen and (max-width: 480px) {
      #vapi-chat-widget-container vapi-widget {
        bottom: 8px !important;
        right: 8px !important;
        left: 8px !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(chat-container) {
        max-height: 75vh !important;
        width: calc(100vw - 16px) !important;
        max-width: 100% !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(messages-container) {
        max-height: calc(75vh - 140px) !important;
        overflow-y: auto !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(trigger-button) {
        width: 52px !important;
        height: 52px !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(input-container) {
        padding: 12px 8px !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(input-field) {
        font-size: 16px !important; /* Prevents zoom on iOS */
      }
    }

    /* Very small devices */
    @media screen and (max-width: 360px) {
      #vapi-chat-widget-container vapi-widget::part(chat-container) {
        max-height: 80vh !important;
      }
      
      #vapi-chat-widget-container vapi-widget::part(messages-container) {
        max-height: calc(80vh - 140px) !important;
      }
    }

    /* Prevent body scroll when chat is open on mobile */
    @media screen and (max-width: 768px) {
      body.vapi-chat-open {
        overflow: hidden !important;
        position: fixed !important;
        width: 100% !important;
      }
    }

    /* Ensure widget doesn't interfere with page content */
    #vapi-chat-widget-container vapi-widget::part(chat-container) {
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
      border: none !important;
      backdrop-filter: blur(10px) !important;
    }

    /* High DPI display optimizations */
    @media screen and (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      #vapi-chat-widget-container vapi-widget::part(trigger-button) {
        border: 0.5px solid rgba(255, 255, 255, 0.1) !important;
      }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      #vapi-chat-widget-container vapi-widget::part(chat-container) {
        backdrop-filter: blur(20px) !important;
      }
    }
  </style>

  <!-- The actual widget -->
  <vapi-widget
    public-key="f575135b-5ea7-4528-8daa-c1f9e731d55b"
    assistant-id="c86d0583-5a3a-4085-8976-28bff7f0e71b"
    mode="chat"
    theme="dark"
    base-bg-color="#000000"
    accent-color="#d52329"
    cta-button-color="#000000"
    cta-button-text-color="#ffffff"
    border-radius="large"
    size="compact"
    position="bottom-right"
    title="TALK WITH AI"
    start-button-text="Start"
    end-button-text="End Call"
    chat-first-message="Hey, How can I help you today?"
    chat-placeholder="Type your message..."
    voice-show-transcript="true"
    consent-required="true"
    consent-title="Terms and conditions"
    consent-content="By clicking "Agree," and each time I interact with this AI agent, I consent to the recording, storage, and sharing of my communications with third-party service providers, and as otherwise described in our Terms of Service."
    consent-storage-key="vapi_widget_consent"
  ></vapi-widget>

  <!-- Widget script -->
  <script src="https://unpkg.com/@vapi-ai/client-sdk-react/dist/embed/widget.umd.js" async type="text/javascript"></script>

  <!-- Auto-optimization script -->
  <script>
    (function() {
      'use strict';
      
      // Wait for widget to load
      function initVapiOptimization() {
        const widget = document.querySelector('#vapi-chat-widget-container vapi-widget');
        if (!widget) {
          setTimeout(initVapiOptimization, 100);
          return;
        }

        // Mobile body scroll prevention
        function preventBodyScroll() {
          if (window.innerWidth <= 768) {
            document.body.classList.add('vapi-chat-open');
          }
        }

        function allowBodyScroll() {
          document.body.classList.remove('vapi-chat-open');
        }

        // Listen for widget events
        widget.addEventListener('vapi-widget-opened', preventBodyScroll);
        widget.addEventListener('vapi-widget-closed', allowBodyScroll);
        
        // Fallback event listeners with different names
        widget.addEventListener('widget-opened', preventBodyScroll);
        widget.addEventListener('widget-closed', allowBodyScroll);
        widget.addEventListener('chat-opened', preventBodyScroll);
        widget.addEventListener('chat-closed', allowBodyScroll);

        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
          setTimeout(function() {
            // Force a layout recalculation
            widget.style.display = 'none';
            widget.offsetHeight; // Trigger reflow
            widget.style.display = '';
          }, 100);
        });

        // Handle window resize
        let resizeTimeout;
        window.addEventListener('resize', function() {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(function() {
            // Ensure proper positioning after resize
            if (window.innerWidth > 768 && document.body.classList.contains('vapi-chat-open')) {
              document.body.classList.remove('vapi-chat-open');
            }
          }, 250);
        });

        // iOS Safari viewport fix
        if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
          function setViewportHeight() {
            document.documentElement.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px');
          }
          setViewportHeight();
          window.addEventListener('resize', setViewportHeight);
          window.addEventListener('orientationchange', function() {
            setTimeout(setViewportHeight, 500);
          });
        }
      }

      // Start initialization when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initVapiOptimization);
      } else {
        initVapiOptimization();
      }
    })();
  </script>
</div>

</body>
</html>
